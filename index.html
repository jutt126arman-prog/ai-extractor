<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Design Extractor Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white min-h-screen p-5">

    <div class="max-w-3xl mx-auto text-center">
        <h1 class="text-4xl font-bold mb-6 text-blue-400">AI Asset Extractor</h1>

        <div class="bg-gray-800 border-4 border-dashed border-gray-700 rounded-3xl p-10 mb-6">
            <input type="file" id="imageInput" class="hidden" accept="image/*">
            <label for="imageInput" class="cursor-pointer block">
                <p id="statusText">Click karein aur Design upload karein</p>
                <img id="imagePreview" class="hidden mx-auto mt-4 max-h-64 rounded shadow-lg">
            </label>
        </div>

        <button onclick="extractDesign()" id="mainBtn" class="hidden bg-blue-600 px-10 py-4 rounded-full font-bold text-xl mb-10">
            Extract Design (Original Colors)
        </button>

        <div id="resultArea" class="hidden bg-gray-800 p-8 rounded-3xl">
            <h2 class="text-2xl mb-4 text-green-400">Design Alag Ho Gaya!</h2>
            <canvas id="resultCanvas" class="mx-auto bg-transparent border-2 border-blue-400 max-w-full"></canvas>
            <div class="mt-6">
                <a id="downloadBtn" class="bg-green-600 px-8 py-3 rounded-xl font-bold inline-block cursor-pointer">
                    Download PNG (Transparent)
                </a>
            </div>
        </div>
    </div>

    <script>
        const imageInput = document.getElementById('imageInput');
        const imagePreview = document.getElementById('imagePreview');
        const mainBtn = document.getElementById('mainBtn');
        const resultArea = document.getElementById('resultArea');
        const canvas = document.getElementById('resultCanvas');
        const ctx = canvas.getContext('2d');

        imageInput.onchange = (e) => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (event) => {
                    imagePreview.src = event.target.result;
                    imagePreview.classList.remove('hidden');
                    mainBtn.classList.remove('hidden');
                    document.getElementById('statusText').innerText = "Image Select Ho Gayi!";
                };
                reader.readAsDataURL(file);
            }
        };

        function extractDesign() {
            // Processing color and transparency
            canvas.width = imagePreview.naturalWidth;
            canvas.height = imagePreview.naturalHeight;
            
            // Draw original image
            ctx.drawImage(imagePreview, 0, 0);
            
            // Asli magic: Is se colors wapis ayenge aur background transparent hoga
            // (Note: Ye browser-level extraction hai)
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;

            // Simple logic to make white background transparent while keeping design colors
            for (let i = 0; i < data.length; i += 4) {
                let r = data[i], g = data[i+1], b = data[i+2];
                // Agar pixel white ya light hai toh transparent kar do
                if (r > 240 && g > 240 && b > 240) {
                    data[i + 3] = 0; 
                }
            }
            ctx.putImageData(imageData, 0, 0);

            // Show result
            resultArea.classList.remove('hidden');
            
            // Fix Download Button
            const downloadBtn = document.getElementById('downloadBtn');
            downloadBtn.href = canvas.toDataURL("image/png");
            downloadBtn.download = "extracted_design.png";
        }
    </script>
</body>
</html>
