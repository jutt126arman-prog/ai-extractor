<!DOCTYPE html>
<html lang="ur">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Texture Transfer - Mockup to New Texture</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(255,255,255,0.1);
        }

        .header h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #00dbde 0%, #fc00ff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header p {
            color: #aaa;
            font-size: 1.1rem;
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* Upload Section */
        .upload-section {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .upload-box {
            flex: 1;
            min-width: 300px;
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            border: 2px dashed rgba(255,255,255,0.2);
            transition: all 0.3s;
            cursor: pointer;
        }

        .upload-box:hover {
            border-color: #00dbde;
            transform: translateY(-5px);
            background: rgba(0,0,0,0.4);
        }

        .upload-icon {
            font-size: 60px;
            margin-bottom: 20px;
            color: #00dbde;
        }

        .upload-title {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: white;
        }

        .upload-desc {
            color: #aaa;
            font-size: 0.9rem;
            margin-bottom: 20px;
        }

        .file-info {
            color: #00ff88;
            font-size: 0.9rem;
            margin-top: 10px;
        }

        /* Texture Selection */
        .texture-selection {
            margin-bottom: 40px;
        }

        .texture-title {
            text-align: center;
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: white;
        }

        .texture-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .texture-item {
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
        }

        .texture-item:hover {
            transform: scale(1.05);
            border-color: #00dbde;
        }

        .texture-item.selected {
            border-color: #fc00ff;
            box-shadow: 0 0 20px rgba(252,0,255,0.5);
        }

        .texture-preview {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }

        .texture-name {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px;
            text-align: center;
            font-size: 0.9rem;
        }

        /* Custom Texture */
        .custom-texture {
            margin-top: 20px;
            text-align: center;
        }

        .custom-btn {
            background: linear-gradient(90deg, #00dbde 0%, #fc00ff 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .custom-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,219,222,0.4);
        }

        /* Process Button */
        .process-section {
            text-align: center;
            margin: 40px 0;
        }

        .process-btn {
            background: linear-gradient(90deg, #00b09b 0%, #96c93d 100%);
            color: white;
            border: none;
            padding: 18px 60px;
            font-size: 1.3rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            letter-spacing: 1px;
        }

        .process-btn:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0,176,155,0.4);
        }

        .process-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Result Section */
        .result-section {
            display: none;
            margin-top: 40px;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .result-title {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 30px;
            color: white;
        }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .result-box {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

        .result-box h3 {
            margin-bottom: 15px;
            color: #00dbde;
            font-size: 1.3rem;
        }

        .result-image {
            width: 100%;
            max-height: 400px;
            object-fit: contain;
            border-radius: 10px;
            background: rgba(255,255,255,0.05);
            padding: 10px;
        }

        /* Download Options */
        .download-options {
            text-align: center;
            margin-top: 30px;
        }

        .download-btn {
            display: inline-block;
            background: linear-gradient(90deg, #ff416c 0%, #ff4b2b 100%);
            color: white;
            padding: 15px 40px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            margin: 10px;
            transition: all 0.3s;
        }

        .download-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(255,65,108,0.4);
        }

        /* Loading */
        .loader {
            display: none;
            text-align: center;
            margin: 30px 0;
        }

        .loader-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: #00dbde;
        }

        .spinner {
            border: 5px solid rgba(255,255,255,0.1);
            border-top: 5px solid #00dbde;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* How it works */
        .instructions {
            margin-top: 50px;
            padding: 30px;
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
        }

        .instructions h2 {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .step {
            text-align: center;
            padding: 20px;
        }

        .step-number {
            background: linear-gradient(90deg, #00dbde 0%, #fc00ff 100%);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-weight: bold;
        }

        .step h3 {
            margin-bottom: 10px;
            color: #00dbde;
        }

        .step p {
            color: #aaa;
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .upload-section {
                flex-direction: column;
            }
            
            .upload-box {
                min-width: 100%;
            }
            
            .result-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>ğŸ¨ AI Texture Transfer</h1>
            <p>Ú©Ø³ÛŒ Ø¨Ú¾ÛŒ Mockup Ú©ÛŒ Texture Ø§Ù„Ú¯ Ú©Ø±ÛŒÚº Ø§ÙˆØ± Ù†Ø¦ÛŒ Texture Ù…ÛŒÚº Ø§Ù¾Ù†Û’ ÚˆÛŒØ²Ø§Ø¦Ù† Ú©Ùˆ ÚˆØ§Ù„ÛŒÚºÛ” T-shirtØŒ Ù…Ú¯ØŒ ÙÙˆÙ† Ú©ÙˆØ±ØŒ ÛŒØ§ Ú©Ø³ÛŒ Ø¨Ú¾ÛŒ Ù¾Ø±Ø§ÚˆÚ©Ù¹ Ú©Ø§ ÚˆÛŒØ²Ø§Ø¦Ù† ØªØ¨Ø¯ÛŒÙ„ Ú©Ø±ÛŒÚºÛ”</p>
        </div>

        <!-- Upload Section -->
        <div class="upload-section">
            <!-- Mockup Upload -->
            <div class="upload-box" id="mockupUpload" onclick="document.getElementById('mockupInput').click()">
                <div class="upload-icon">ğŸ“±</div>
                <div class="upload-title">1. Mockup Ø§Ù¾ Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº</div>
                <div class="upload-desc">Ø§Ù¾Ù†ÛŒ Ù¾Ø±Ø§ÚˆÚ©Ù¹ Ú©ÛŒ ØªØµÙˆÛŒØ± Ø§Ù¾ Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº (T-shirt, Bottle, Mug, Phone case, etc.)</div>
                <div id="mockupInfo" class="file-info"></div>
            </div>
            <input type="file" id="mockupInput" accept="image/*" style="display: none">

            <!-- Design Upload -->
            <div class="upload-box" id="designUpload" onclick="document.getElementById('designInput').click()">
                <div class="upload-icon">ğŸ¨</div>
                <div class="upload-title">2. ÚˆÛŒØ²Ø§Ø¦Ù† Ø§Ù¾ Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</div>
                <div class="upload-desc">Ù†ÛŒØ§ ÚˆÛŒØ²Ø§Ø¦Ù†/Ù„ÙˆÚ¯Ùˆ/Ù¹ÛŒÚ©Ø³Ù¹ Ø§Ù¾ Ù„ÙˆÚˆ Ú©Ø±ÛŒÚºÛ” Ø§Ú¯Ø± Ù†ÛÛŒÚº ØªÙˆ Ø§ØµÙ„ ÚˆÛŒØ²Ø§Ø¦Ù† ÛÛŒ Ø§Ø³ØªØ¹Ù…Ø§Ù„ ÛÙˆÚ¯Ø§</div>
                <div id="designInfo" class="file-info"></div>
            </div>
            <input type="file" id="designInput" accept="image/*" style="display: none">
        </div>

        <!-- Texture Selection -->
        <div class="texture-selection">
            <div class="texture-title">3. Ù†Ø¦ÛŒ Texture Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº</div>
            
            <div class="texture-grid" id="textureGrid">
                <!-- Textures will be added by JavaScript -->
            </div>
            
            <div class="custom-texture">
                <button class="custom-btn" onclick="document.getElementById('textureInput').click()">
                    + Ø§Ù¾Ù†ÛŒ Texture Ø§Ù¾ Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº
                </button>
                <input type="file" id="textureInput" accept="image/*" style="display: none">
                <div id="customTextureInfo" class="file-info" style="margin-top: 10px;"></div>
            </div>
        </div>

        <!-- Process Button -->
        <div class="process-section">
            <button class="process-btn" id="processBtn" disabled>ğŸš€ Texture Transfer Ø´Ø±ÙˆØ¹ Ú©Ø±ÛŒÚº</button>
        </div>

        <!-- Loading -->
        <div class="loader" id="loader">
            <div class="loader-text">AI Texture Transfer Ú©Ø± Ø±ÛØ§ ÛÛ’... Ø¨Ø±Ø§Û Ú©Ø±Ù… Ø§Ù†ØªØ¸Ø§Ø± Ú©Ø±ÛŒÚº</div>
            <div class="spinner"></div>
            <div style="margin-top: 20px; color: #aaa;">
                ÛŒÛ Ø¹Ù…Ù„ 10-30 Ø³ÛŒÚ©Ù†Úˆ Ù„Ú¯ Ø³Ú©ØªØ§ ÛÛ’<br>
                ÛÙ… Ø¢Ù¾ Ú©Û’ ÚˆÛŒØ²Ø§Ø¦Ù† Ú©Ùˆ Ù†Ø¦ÛŒ Texture Ù…ÛŒÚº Ù…Ù†ØªÙ‚Ù„ Ú©Ø± Ø±ÛÛ’ ÛÛŒÚº
            </div>
        </div>

        <!-- Result Section -->
        <div class="result-section" id="resultSection">
            <div class="result-title">ğŸ‰ Ø¢Ù¾ Ú©Ø§ Ù†ØªÛŒØ¬Û ØªÛŒØ§Ø± ÛÛ’!</div>
            
            <div class="result-grid">
                <div class="result-box">
                    <h3>Ø§ØµÙ„ Mockup</h3>
                    <img id="originalMockup" class="result-image" alt="Original Mockup">
                </div>
                
                <div class="result-box">
                    <h3>Ù†Ø¦ÛŒ Texture</h3>
                    <img id="selectedTexture" class="result-image" alt="Selected Texture">
                </div>
                
                <div class="result-box">
                    <h3>Ù†ØªÛŒØ¬Û (Texture Transfer)</h3>
                    <img id="finalResult" class="result-image" alt="Final Result">
                </div>
            </div>
            
            <div class="download-options">
                <a href="#" id="downloadPNG" class="download-btn">ğŸ“¥ PNG ÚˆØ§Ø¤Ù† Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº</a>
                <a href="#" id="downloadJPG" class="download-btn">ğŸ“¥ JPG ÚˆØ§Ø¤Ù† Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº</a>
                <button class="download-btn" onclick="resetApp()">ğŸ”„ Ù†ÛŒØ§ Ù¹Ø±Ø§Ù†Ø³ÙØ± Ú©Ø±ÛŒÚº</button>
            </div>
        </div>

        <!-- How it works -->
        <div class="instructions">
            <h2>ğŸ”§ ÛŒÛ Ú©ÛŒØ³Û’ Ú©Ø§Ù… Ú©Ø±ØªØ§ ÛÛ’ØŸ</h2>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <h3>Mockup Ø§Ù¾ Ù„ÙˆÚˆ</h3>
                    <p>AI Ø¢Ù¾ Ú©ÛŒ Ù¾Ø±Ø§ÚˆÚ©Ù¹ Ú©ÛŒ ØªØµÙˆÛŒØ± Ø³Û’ ÚˆÛŒØ²Ø§Ø¦Ù† Ø§ÙˆØ± Texture Ú©Ùˆ Ø§Ù„Ú¯ Ú©Ø±ØªØ§ ÛÛ’</p>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <h3>Texture Ù…Ù†ØªØ®Ø¨</h3>
                    <p>Ù†ÛŒØ§ Ù…ÙˆØ§Ø¯ Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº (Ú†Ù…Ú‘Ø§ØŒ Ú©Ù¾Ú‘Ø§ØŒ Ù„Ú©Ú‘ÛŒØŒ Ø¯Ú¾Ø§Øª ÙˆØºÛŒØ±Û)</p>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <h3>AI Ù¾Ø±ÙˆØ³ÛŒØ³Ù†Ú¯</h3>
                    <p>ÛÙ…Ø§Ø±Ø§ AI Ø¢Ù¾ Ú©Û’ ÚˆÛŒØ²Ø§Ø¦Ù† Ú©Ùˆ Ù†Ø¦ÛŒ Texture Ù¾Ø± Ù„Ø§Ú¯Ùˆ Ú©Ø±ØªØ§ ÛÛ’</p>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <h3>Ù†ØªÛŒØ¬Û Ø­Ø§ØµÙ„</h3>
                    <p>Ø§Ù¾Ù†Û’ ÚˆÛŒØ²Ø§Ø¦Ù† Ú©ÛŒ Ù†Ø¦ÛŒ Texture ÙˆØ§Ù„ÛŒ ØªØµÙˆÛŒØ± ÚˆØ§Ø¤Ù† Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Elements
        const mockupInput = document.getElementById('mockupInput');
        const designInput = document.getElementById('designInput');
        const textureInput = document.getElementById('textureInput');
        const processBtn = document.getElementById('processBtn');
        const loader = document.getElementById('loader');
        const resultSection = document.getElementById('resultSection');
        const textureGrid = document.getElementById('textureGrid');
        
        // State
        let mockupImage = null;
        let designImage = null;
        let selectedTexture = null;
        let selectedTextureUrl = null;
        
        // Sample Textures (Base64 encoded - actual app would use real textures)
        const sampleTextures = [
            { name: "Ú†Ù…Ú‘Ø§", color: "#8B4513", pattern: "leather" },
            { name: "Ø±ÙˆØ¦ÛŒ Ú©Ø§ Ú©Ù¾Ú‘Ø§", color: "#F5F5DC", pattern: "cotton" },
            { name: "Ø±ÛŒØ´Ù…", color: "#FFD700", pattern: "silk" },
            { name: "Ù„Ú©Ú‘ÛŒ", color: "#DEB887", pattern: "wood" },
            { name: "Ø¯Ú¾Ø§Øª", color: "#C0C0C0", pattern: "metal" },
            { name: "Ø³Ù„ÛŒÙ¹", color: "#708090", pattern: "slate" },
            { name: "Ú©Ù†ÙˆÛŒÚº", color: "#000000", pattern: "canvas" },
            { name: "Ø³ÙÛŒØ¯ Ú©Ø§ØºØ°", color: "#FFFFFF", pattern: "paper" },
            { name: "Ù†ÛŒÙ¹", color: "#87CEEB", pattern: "net" },
            { name: "Ø´ÛŒØ´Û", color: "#ADD8E6", pattern: "glass" },
            { name: "Ù¾ØªÚ¾Ø±", color: "#696969", pattern: "stone" },
            { name: "Ú©Ø§Ø±Ù¾Ù¹", color: "#D2691E", pattern: "carpet" }
        ];

        // Initialize texture grid
        function initTextures() {
            textureGrid.innerHTML = '';
            sampleTextures.forEach((texture, index) => {
                const textureItem = document.createElement('div');
                textureItem.className = 'texture-item';
                textureItem.innerHTML = `
                    <div class="texture-preview" style="background: linear-gradient(45deg, ${texture.color} 25%, transparent 25%), 
                    linear-gradient(-45deg, ${texture.color} 25%, transparent 25%), 
                    linear-gradient(45deg, transparent 75%, ${texture.color} 75%), 
                    linear-gradient(-45deg, transparent 75%, ${texture.color} 75%);
                    background-size: 20px 20px;
                    background-position: 0 0, 0 10px, 10px -10px, -10px 0px;"></div>
                    <div class="texture-name">${texture.name}</div>
                `;
                
                textureItem.addEventListener('click', () => {
                    document.querySelectorAll('.texture-item').forEach(item => {
                        item.classList.remove('selected');
                    });
                    textureItem.classList.add('selected');
                    selectedTexture = texture.pattern;
                    selectedTextureUrl = textureItem.querySelector('.texture-preview').style.background;
                    updateProcessButton();
                });
                
                textureGrid.appendChild(textureItem);
            });
        }

        // File upload handlers
        mockupInput.addEventListener('change', handleMockupUpload);
        designInput.addEventListener('change', handleDesignUpload);
        textureInput.addEventListener('change', handleTextureUpload);

        function handleMockupUpload(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            if (!file.type.startsWith('image/')) {
                alert('Ø¨Ø±Ø§Û Ú©Ø±Ù… ØµØ±Ù ØªØµÙˆÛŒØ±ÛŒ ÙØ§Ø¦Ù„ Ø§Ù¾ Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº!');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(event) {
                mockupImage = event.target.result;
                document.getElementById('mockupInfo').textContent = `âœ… ${file.name} (${(file.size/1024/1024).toFixed(2)} MB)`;
                document.getElementById('mockupUpload').style.borderColor = '#00ff88';
                updateProcessButton();
            };
            reader.readAsDataURL(file);
        }

        function handleDesignUpload(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(event) {
                designImage = event.target.result;
                document.getElementById('designInfo').textContent = `âœ… ${file.name}`;
                document.getElementById('designUpload').style.borderColor = '#00ff88';
            };
            reader.readAsDataURL(file);
        }

        function handleTextureUpload(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(event) {
                // Create custom texture item
                const textureItem = document.createElement('div');
                textureItem.className = 'texture-item selected';
                textureItem.innerHTML = `
                    <img src="${event.target.result}" class="texture-preview" alt="Custom Texture">
                    <div class="texture-name">Ø§Ù¾Ù†ÛŒ Texture</div>
                `;
                
                textureItem.addEventListener('click', () => {
                    document.querySelectorAll('.texture-item').forEach(item => {
                        item.classList.remove('selected');
                    });
                    textureItem.classList.add('selected');
                    selectedTexture = 'custom';
                    selectedTextureUrl = event.target.result;
                    updateProcessButton();
                });
                
                textureGrid.appendChild(textureItem);
                document.getElementById('customTextureInfo').textContent = `âœ… ${file.name}`;
            };
            reader.readAsDataURL(file);
        }

        function updateProcessButton() {
            processBtn.disabled = !(mockupImage && selectedTexture);
        }

        // Process button handler
        processBtn.addEventListener('click', async function() {
            if (!mockupImage || !selectedTexture) return;
            
            // Show loader
            loader.style.display = 'block';
            processBtn.disabled = true;
            
            // Simulate AI processing
            setTimeout(async () => {
                try {
                    // Create texture transfer result
                    const result = await simulateTextureTransfer(mockupImage, selectedTextureUrl, designImage);
                    
                    // Update result section
                    document.getElementById('originalMockup').src = mockupImage;
                    document.getElementById('selectedTexture').src = selectedTextureUrl || createTextureImage(selectedTexture);
                    document.getElementById('finalResult').src = result;
                    
                    // Set download links
                    document.getElementById('downloadPNG').href = result;
                    document.getElementById('downloadPNG').download = 'texture_transfer_result.png';
                    document.getElementById('downloadJPG').href = result; // In real app, convert to JPG
                    document.getElementById('downloadJPG').download = 'texture_transfer_result.jpg';
                    
                    // Show result
                    resultSection.style.display = 'block';
                    loader.style.display = 'none';
                    
                    // Scroll to result
                    resultSection.scrollIntoView({ behavior: 'smooth' });
                    
                } catch (error) {
                    alert('Ø®Ø±Ø§Ø¨ÛŒ: ' + error.message);
                    loader.style.display = 'none';
                    processBtn.disabled = false;
                }
            }, 3000); // Simulate 3 second processing
        });

        // Simulate texture transfer (Demo only)
        function simulateTextureTransfer(mockupDataUrl, textureDataUrl, designDataUrl) {
            return new Promise((resolve) => {
                const mockupImg = new Image();
                mockupImg.onload = function() {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    
                    // Set canvas size to mockup size
                    canvas.width = mockupImg.width;
                    canvas.height = mockupImg.height;
                    
                    // Draw mockup as background
                    ctx.drawImage(mockupImg, 0, 0);
                    
                    // Apply texture overlay
                    if (textureDataUrl) {
                        const textureImg = new Image();
                        textureImg.onload = function() {
                            // Create pattern from texture
                            const pattern = ctx.createPattern(textureImg, 'repeat');
                            
                            // Apply texture with overlay blend mode
                            ctx.globalCompositeOperation = 'overlay';
                            ctx.fillStyle = pattern;
                            ctx.fillRect(0, 0, canvas.width, canvas.height);
                            
                            // Reset composite operation
                            ctx.globalCompositeOperation = 'source-over';
                            
                            // If design is provided, overlay it
                            if (designDataUrl) {
                                const designImg = new Image();
                                designImg.onload = function() {
                                    // Center the design
                                    const x = (canvas.width - designImg.width) / 2;
                                    const y = (canvas.height - designImg.height) / 2;
                                    ctx.drawImage(designImg, x, y);
                                    
                                    // Add realistic shadows and highlights
                                    addRealisticEffects(ctx, canvas.width, canvas.height);
                                    
                                    // Convert to data URL
                                    const result = canvas.toDataURL('image/png', 1.0);
                                    resolve(result);
                                };
                                designImg.src = designDataUrl;
                            } else {
                                // Add realistic effects
                                addRealisticEffects(ctx, canvas.width, canvas.height);
                                
                                // Convert to data URL
                                const result = canvas.toDataURL('image/png', 1.0);
                                resolve(result);
                            }
                        };
                        
                        // For sample textures (which are CSS gradients)
                        if (typeof textureDataUrl === 'string' && textureDataUrl.includes('gradient')) {
                            // Create a texture pattern for sample textures
                            ctx.fillStyle = textureDataUrl;
                            ctx.globalAlpha = 0.3;
                            ctx.fillRect(0, 0, canvas.width, canvas.height);
                            ctx.globalAlpha = 1.0;
                            
                            // Add realistic effects
                            addRealisticEffects(ctx, canvas.width, canvas.height);
                            
                            const result = canvas.toDataURL('image/png', 1.0);
                            resolve(result);
                        } else {
                            textureImg.src = textureDataUrl;
                        }
                    }
                };
                mockupImg.src = mockupDataUrl;
            });
        }

        function addRealisticEffects(ctx, width, height) {
            // Add shadow
            ctx.shadowColor = 'rgba(0,0,0,0.3)';
            ctx.shadowBlur = 10;
            ctx.shadowOffsetX = 5;
            ctx.shadowOffsetY = 5;
            
            // Draw a subtle border
            ctx.strokeStyle = 'rgba(255,255,255,0.1)';
            ctx.lineWidth = 2;
            ctx.strokeRect(10, 10, width - 20, height - 20);
            
            // Reset shadow
            ctx.shadowColor = 'transparent';
            
            // Add watermark
            ctx.fillStyle = 'rgba(255,255,255,0.2)';
            ctx.font = '20px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('AI Texture Transfer', width/2, height - 30);
        }

        function createTextureImage(textureType) {
            // Create a canvas with texture pattern
            const canvas = document.createElement('canvas');
            canvas.width = 400;
            canvas.height = 400;
            const ctx = canvas.getContext('2d');
            
            // Create different patterns based on texture type
            switch(textureType) {
                case 'leather':
                    ctx.fillStyle = '#8B4513';
                    break;
                case 'cotton':
                    ctx.fillStyle = '#F5F5DC';
                    break;
                case 'silk':
                    ctx.fillStyle = '#FFD700';
                    break;
                default:
                    ctx.fillStyle = '#CCCCCC';
            }
            
            ctx.fillRect(0, 0, 400, 400);
            return canvas.toDataURL();
        }

        function resetApp() {
            mockupImage = null;
            designImage = null;
            selectedTexture = null;
            selectedTextureUrl = null;
            
            // Reset UI
            document.getElementById('mockupInfo').textContent = '';
            document.getElementById('designInfo').textContent = '';
            document.getElementById('customTextureInfo').textContent = '';
            document.getElementById('mockupUpload').style.borderColor = '';
            document.getElementById('designUpload').style.borderColor = '';
            
            document.querySelectorAll('.texture-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            resultSection.style.display = 'none';
            processBtn.disabled = true;
            
            // Reset file inputs
            mockupInput.value = '';
            designInput.value = '';
            textureInput.value = '';
            
            // Reinitialize textures
            initTextures();
        }

        // Initialize on load
        window.onload = function() {
            initTextures();
            
            // Show welcome message
            setTimeout(() => {
                alert("ğŸ¨ AI Texture Transfer Ù…ÛŒÚº Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯!\n\nØ§Ø³ Ù¹ÙˆÙ„ Ø³Û’ Ø¢Ù¾:\n1. Ú©Ø³ÛŒ Ø¨Ú¾ÛŒ Mockup Ø³Û’ Texture Ø§Ù„Ú¯ Ú©Ø± Ø³Ú©ØªÛ’ ÛÛŒÚº\n2. Ù†Ø¦ÛŒ Texture Ù…Ù†ØªØ®Ø¨ Ú©Ø± Ø³Ú©ØªÛ’ ÛÛŒÚº\n3. Ø§Ù¾Ù†Ø§ ÚˆÛŒØ²Ø§Ø¦Ù† Ù†Ø¦ÛŒ Texture Ù¾Ø± Ù„Ø§Ú¯Ùˆ Ú©Ø± Ø³Ú©ØªÛ’ ÛÛŒÚº\n\nÙ…Ø«Ø§Ù„: T-shirt Ú©ÛŒ ØªØµÙˆÛŒØ± Ø³Û’ Ù¾Ø±Ù†Ù¹ Ø§Ù„Ú¯ Ú©Ø± Ú©Û’ Ù„Ú©Ú‘ÛŒ ÛŒØ§ Ø¯Ú¾Ø§Øª Ú©ÛŒ Texture Ù¾Ø± ÚˆØ§Ù„ Ø³Ú©ØªÛ’ ÛÛŒÚºÛ”");
            }, 1000);
        };
    </script>
</body>
</html>
