<!DOCTYPE html>
<html lang="ur">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Design Extractor - Ø¨ØºÛŒØ± API Key</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #000428 0%, #004e92 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 2.8rem;
            background: linear-gradient(90deg, #00dbde 0%, #fc00ff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .header p {
            color: #aaa;
            font-size: 1.1rem;
        }

        /* Upload Section */
        .upload-section {
            border: 3px dashed rgba(255,255,255,0.3);
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            margin-bottom: 30px;
            transition: all 0.3s;
            background: rgba(0,0,0,0.2);
        }

        .upload-section:hover {
            border-color: #00dbde;
            background: rgba(0,219,222,0.1);
        }

        .upload-icon {
            font-size: 70px;
            margin-bottom: 20px;
            color: #00dbde;
        }

        .upload-text h3 {
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: white;
        }

        .upload-text p {
            color: #888;
        }

        #fileInput {
            display: none;
        }

        /* Preview */
        .preview-container {
            display: none;
            margin: 30px 0;
            text-align: center;
        }

        .preview-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: white;
        }

        .preview-image {
            max-width: 100%;
            max-height: 300px;
            border-radius: 10px;
            border: 3px solid rgba(255,255,255,0.2);
        }

        /* Process Button */
        .process-section {
            text-align: center;
            margin: 30px 0;
        }

        .process-btn {
            background: linear-gradient(90deg, #00dbde 0%, #fc00ff 100%);
            color: white;
            border: none;
            padding: 18px 60px;
            font-size: 1.3rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .process-btn:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(0,219,222,0.5);
        }

        .process-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Results */
        .results-section {
            display: none;
            margin-top: 40px;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .results-title {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 30px;
            color: white;
        }

        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        @media (max-width: 768px) {
            .results-grid {
                grid-template-columns: 1fr;
            }
        }

        .result-box {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .result-box h3 {
            color: #fc00ff;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .result-image {
            width: 100%;
            max-height: 350px;
            object-fit: contain;
            border-radius: 10px;
            background: rgba(0,0,0,0.5);
            padding: 10px;
        }

        /* Download */
        .download-section {
            text-align: center;
            margin-top: 40px;
        }

        .download-btn {
            display: inline-block;
            background: linear-gradient(90deg, #00dbde 0%, #fc00ff 100%);
            color: white;
            padding: 16px 45px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            margin: 10px;
            transition: all 0.3s;
        }

        .download-btn:hover {
            transform: scale(1.05);
        }

        /* Instructions */
        .instructions {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 30px;
            margin-top: 50px;
        }

        .instructions h3 {
            text-align: center;
            margin-bottom: 25px;
            color: #00dbde;
            font-size: 1.5rem;
        }

        .steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .step {
            text-align: center;
            padding: 20px;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
        }

        .step-number {
            width: 40px;
            height: 40px;
            background: linear-gradient(90deg, #00dbde, #fc00ff);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-weight: bold;
        }

        .step p {
            color: #aaa;
            font-size: 0.9rem;
        }

        /* Loading */
        .loader {
            display: none;
            text-align: center;
            margin: 30px 0;
        }

        .spinner {
            border: 5px solid rgba(255,255,255,0.1);
            border-top: 5px solid #00dbde;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>ğŸ¨ Auto Design Extractor</h1>
            <p>Ú©ÙˆØ¦ÛŒ Ø¨Ú¾ÛŒ Mockup Ø§Ù¾ Ù„ÙˆÚˆ Ú©Ø±ÛŒÚºØŒ AI Ø®ÙˆØ¯Ú©Ø§Ø± Ø·ÙˆØ± Ù¾Ø± ÚˆÛŒØ²Ø§Ø¦Ù† Ø§Ù„Ú¯ Ú©Ø± Ø¯Û’ Ú¯Ø§</p>
            <p style="color: #00ff88; margin-top: 10px; font-size: 0.9rem;">
                âœ… No API Key Required | 100% Free | Works Offline
            </p>
        </div>

        <!-- Upload Section -->
        <div class="upload-section" id="uploadSection">
            <div class="upload-icon">ğŸ“¤</div>
            <div class="upload-text">
                <h3>Mockup Ø§Ù¾ Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº</h3>
                <p>Ú©Ù„Ú© Ú©Ø±ÛŒÚº ÛŒØ§ ØªØµÙˆÛŒØ± ÚˆØ±ÛŒÚ¯ Ø§ÛŒÙ†Úˆ ÚˆØ±Ø§Ù¾ Ú©Ø±ÛŒÚº</p>
                <p style="color: #888; margin-top: 10px;">PNG, JPG, JPEG (Max 10MB)</p>
            </div>
        </div>
        <input type="file" id="fileInput" accept="image/*">

        <!-- Preview -->
        <div class="preview-container" id="previewContainer">
            <div class="preview-title">Ø¢Ù¾ Ú©Ø§ Mockup:</div>
            <img id="previewImage" class="preview-image" alt="Preview">
        </div>

        <!-- Loader -->
        <div class="loader" id="loader">
            <div class="spinner"></div>
            <p style="margin-top: 20px; color: #00dbde; font-size: 1.1rem;">
                AI ÚˆÛŒØ²Ø§Ø¦Ù† Ø§Ù„Ú¯ Ú©Ø± Ø±ÛØ§ ÛÛ’...
            </p>
        </div>

        <!-- Process Button -->
        <div class="process-section">
            <button class="process-btn" id="processBtn" disabled>ğŸš€ ÚˆÛŒØ²Ø§Ø¦Ù† Ø§Ù„Ú¯ Ú©Ø±ÛŒÚº</button>
        </div>

        <!-- Results -->
        <div class="results-section" id="resultsSection">
            <div class="results-title">âœ… ÚˆÛŒØ²Ø§Ø¦Ù† Ø§Ù„Ú¯ ÛÙˆ Ú¯ÛŒØ§!</div>
            
            <div class="results-grid">
                <div class="result-box">
                    <h3>Ø§ØµÙ„ Mockup</h3>
                    <img id="originalImage" class="result-image" alt="Original">
                </div>
                <div class="result-box">
                    <h3>Ø§Ù„Ú¯ Ø´Ø¯Û ÚˆÛŒØ²Ø§Ø¦Ù†</h3>
                    <img id="extractedDesign" class="result-image" alt="Extracted">
                </div>
            </div>

            <div class="download-section">
                <a href="#" id="downloadBtn" class="download-btn" download="design.png">
                    â¬‡ï¸ PNG ÚˆØ§Ø¤Ù† Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº
                </a>
                <button class="download-btn" onclick="resetApp()" style="background: rgba(255,255,255,0.1);">
                    ğŸ”„ Ù†ÛŒØ§ Mockup
                </button>
            </div>
        </div>

        <!-- Instructions -->
        <div class="instructions">
            <h3>ğŸš€ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±Ù†Û’ Ú©Ø§ Ø·Ø±ÛŒÙ‚Û</h3>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <p>Ú©ÙˆØ¦ÛŒ Ø¨Ú¾ÛŒ Mockup ØªØµÙˆÛŒØ± Ø§Ù¾ Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº</p>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <p>"ÚˆÛŒØ²Ø§Ø¦Ù† Ø§Ù„Ú¯ Ú©Ø±ÛŒÚº" Ø¨Ù¹Ù† Ø¯Ø¨Ø§Ø¦ÛŒÚº</p>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <p>AI Ø®ÙˆØ¯Ú©Ø§Ø± ÚˆÛŒØ²Ø§Ø¦Ù† Ø§Ù„Ú¯ Ú©Ø±Û’ Ú¯Ø§</p>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <p>Ø´ÙØ§Ù PNG ÚˆØ§Ø¤Ù† Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Elements
        const uploadSection = document.getElementById('uploadSection');
        const fileInput = document.getElementById('fileInput');
        const previewContainer = document.getElementById('previewContainer');
        const previewImage = document.getElementById('previewImage');
        const processBtn = document.getElementById('processBtn');
        const loader = document.getElementById('loader');
        const resultsSection = document.getElementById('resultsSection');
        
        // State
        let uploadedImage = null;

        // File Upload
        uploadSection.addEventListener('click', () => fileInput.click());
        
        // Drag and Drop
        uploadSection.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadSection.style.borderColor = '#00dbde';
            uploadSection.style.background = 'rgba(0,219,222,0.2)';
        });

        uploadSection.addEventListener('dragleave', () => {
            uploadSection.style.borderColor = '';
            uploadSection.style.background = '';
        });

        uploadSection.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadSection.style.borderColor = '';
            uploadSection.style.background = '';
            
            const file = e.dataTransfer.files[0];
            if (file && file.type.startsWith('image/')) {
                handleFile(file);
            }
        });

        fileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) handleFile(file);
        });

        function handleFile(file) {
            if (!file.type.startsWith('image/')) {
                alert('Ø¨Ø±Ø§Û Ú©Ø±Ù… ØµØ±Ù ØªØµÙˆÛŒØ±ÛŒ ÙØ§Ø¦Ù„ Ø§Ù¾ Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº');
                return;
            }

            if (file.size > 10 * 1024 * 1024) {
                alert('ÙØ§Ø¦Ù„ Ø³Ø§Ø¦Ø² 10MB Ø³Û’ Ø²ÛŒØ§Ø¯Û Ù†ÛÛŒÚº ÛÙˆÙ†Ø§ Ú†Ø§ÛÛŒÛ’');
                return;
            }

            const reader = new FileReader();
            reader.onload = (e) => {
                uploadedImage = e.target.result;
                previewImage.src = uploadedImage;
                previewContainer.style.display = 'block';
                processBtn.disabled = false;
                
                // Update upload section
                uploadSection.innerHTML = `
                    <div class="upload-icon">âœ…</div>
                    <div class="upload-text">
                        <h3 style="color: #00ff88;">Mockup Ø§Ù¾ Ù„ÙˆÚˆ ÛÙˆ Ú¯ÛŒØ§!</h3>
                        <p>Ø§Ø¨ "ÚˆÛŒØ²Ø§Ø¦Ù† Ø§Ù„Ú¯ Ú©Ø±ÛŒÚº" Ø¨Ù¹Ù† Ø¯Ø¨Ø§Ø¦ÛŒÚº</p>
                        <p style="color: #888; margin-top: 10px;">${file.name} (${(file.size/1024/1024).toFixed(2)} MB)</p>
                    </div>
                `;
                
                // Scroll to preview
                previewContainer.scrollIntoView({ behavior: 'smooth' });
            };
            reader.readAsDataURL(file);
        }

        // Process Button
        processBtn.addEventListener('click', async () => {
            if (!uploadedImage) return;

            // Show loader
            loader.style.display = 'block';
            processBtn.disabled = true;
            processBtn.textContent = 'âš¡ AI Ú©Ø§Ù… Ú©Ø± Ø±ÛØ§ ÛÛ’...';

            try {
                // Extract design using advanced algorithm
                const extractedDesign = await extractDesign(uploadedImage);
                
                // Show results
                document.getElementById('originalImage').src = uploadedImage;
                document.getElementById('extractedDesign').src = extractedDesign;
                document.getElementById('downloadBtn').href = extractedDesign;
                document.getElementById('downloadBtn').download = 'extracted_design.png';
                
                resultsSection.style.display = 'block';
                loader.style.display = 'none';
                
                // Scroll to results
                resultsSection.scrollIntoView({ behavior: 'smooth' });
                
                // Reset button
                processBtn.textContent = 'ğŸš€ ÚˆÛŒØ²Ø§Ø¦Ù† Ø§Ù„Ú¯ Ú©Ø±ÛŒÚº';
                processBtn.disabled = false;

            } catch (error) {
                alert('Ø®Ø±Ø§Ø¨ÛŒ: ' + error.message);
                loader.style.display = 'none';
                processBtn.textContent = 'ğŸš€ ÚˆÛŒØ²Ø§Ø¦Ù† Ø§Ù„Ú¯ Ú©Ø±ÛŒÚº';
                processBtn.disabled = false;
            }
        });

        // Advanced Design Extraction Algorithm
        async function extractDesign(imageDataUrl) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    
                    // Set canvas size
                    canvas.width = img.width;
                    canvas.height = img.height;
                    
                    // Draw original image
                    ctx.drawImage(img, 0, 0);
                    
                    // Get image data
                    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                    const data = imageData.data;
                    
                    // Step 1: Detect edges
                    const edges = detectEdges(data, canvas.width, canvas.height);
                    
                    // Step 2: Find design area
                    const designMask = findDesignArea(data, edges, canvas.width, canvas.height);
                    
                    // Step 3: Remove background
                    removeBackground(data, designMask);
                    
                    // Step 4: Enhance design
                    enhanceDesign(data, designMask);
                    
                    // Step 5: Clean up
                    cleanupImage(data, canvas.width, canvas.height);
                    
                    // Put modified data back
                    ctx.putImageData(imageData, 0, 0);
                    
                    // Convert to transparent PNG
                    const result = canvas.toDataURL('image/png');
                    resolve(result);
                };
                
                img.onerror = reject;
                img.src = imageDataUrl;
            });
        }

        // Edge detection using Sobel operator
        function detectEdges(data, width, height) {
            const edges = new Uint8Array(width * height);
            
            // Sobel kernels
            const sobelX = [-1, 0, 1, -2, 0, 2, -1, 0, 1];
            const sobelY = [-1, -2, -1, 0, 0, 0, 1, 2, 1];
            
            for (let y = 1; y < height - 1; y++) {
                for (let x = 1; x < width - 1; x++) {
                    let pixelX = 0;
                    let pixelY = 0;
                    
                    // Apply Sobel operator
                    for (let ky = -1; ky <= 1; ky++) {
                        for (let kx = -1; kx <= 1; kx++) {
                            const idx = ((y + ky) * width + (x + kx)) * 4;
                            const gray = 0.299 * data[idx] + 0.587 * data[idx + 1] + 0.114 * data[idx + 2];
                            
                            const kernelIdx = (ky + 1) * 3 + (kx + 1);
                            pixelX += gray * sobelX[kernelIdx];
                            pixelY += gray * sobelY[kernelIdx];
                        }
                    }
                    
                    const magnitude = Math.sqrt(pixelX * pixelX + pixelY * pixelY);
                    edges[y * width + x] = magnitude > 50 ? 255 : 0;
                }
            }
            
            return edges;
        }

        // Find design area using flood fill from edges
        function findDesignArea(data, edges, width, height) {
            const mask = new Uint8Array(width * height);
            const visited = new Uint8Array(width * height);
            
            // Find starting points (strong edges)
            const seeds = [];
            for (let y = 0; y < height; y++) {
                for (let x = 0; x < width; x++) {
                    if (edges[y * width + x] > 200) {
                        seeds.push({ x, y });
                    }
                }
            }
            
            // Flood fill from edges
            const stack = [...seeds];
            while (stack.length > 0) {
                const { x, y } = stack.pop();
                const idx = y * width + x;
                
                if (visited[idx] || x < 0 || x >= width || y < 0 || y >= height) {
                    continue;
                }
                
                visited[idx] = 1;
                mask[idx] = 255;
                
                // Check if pixel is part of design (not background)
                const pixelIdx = idx * 4;
                const r = data[pixelIdx];
                const g = data[pixelIdx + 1];
                const b = data[pixelIdx + 2];
                
                // Design pixels are usually different from background
                const isDesign = !isBackgroundColor(r, g, b);
                
                if (isDesign) {
                    // Add neighbors
                    stack.push({ x: x - 1, y });
                    stack.push({ x: x + 1, y });
                    stack.push({ x, y: y - 1 });
                    stack.push({ x, y: y + 1 });
                }
            }
            
            return mask;
        }

        // Remove background based on mask
        function removeBackground(data, mask) {
            for (let i = 0; i < mask.length; i++) {
                if (mask[i] === 0) {
                    // This is background, make transparent
                    const dataIdx = i * 4;
                    data[dataIdx + 3] = 0;
                }
            }
        }

        // Enhance design colors
        function enhanceDesign(data, mask) {
            for (let i = 0; i < mask.length; i++) {
                if (mask[i] > 0) {
                    const idx = i * 4;
                    
                    // Increase contrast
                    data[idx] = Math.min(255, data[idx] * 1.2);     // Red
                    data[idx + 1] = Math.min(255, data[idx + 1] * 1.2); // Green
                    data[idx + 2] = Math.min(255, data[idx + 2] * 1.2); // Blue
                }
            }
        }

        // Clean up image
        function cleanupImage(data, width, height) {
            // Remove isolated pixels
            for (let y = 1; y < height - 1; y++) {
                for (let x = 1; x < width - 1; x++) {
                    const idx = (y * width + x) * 4;
                    
                    if (data[idx + 3] > 0) {
                        // Check neighbors
                        let neighborCount = 0;
                        for (let dy = -1; dy <= 1; dy++) {
                            for (let dx = -1; dx <= 1; dx++) {
                                if (dx === 0 && dy === 0) continue;
                                
                                const nIdx = ((y + dy) * width + (x + dx)) * 4;
                                if (data[nIdx + 3] > 0) {
                                    neighborCount++;
                                }
                            }
                        }
                        
                        // Remove isolated pixel
                        if (neighborCount < 2) {
                            data[idx + 3] = 0;
                        }
                    }
                }
            }
        }

        // Check if color is background
        function isBackgroundColor(r, g, b) {
            // Common background colors (white, black, gray)
            const isWhite = r > 200 && g > 200 && b > 200;
            const isBlack = r < 50 && g < 50 && b < 50;
            const isGray = Math.abs(r - g) < 30 && Math.abs(g - b) < 30;
            
            return isWhite || isBlack || isGray;
        }

        // Reset app
        function resetApp() {
            uploadedImage = null;
            previewContainer.style.display = 'none';
            resultsSection.style.display = 'none';
            loader.style.display = 'none';
            processBtn.disabled = true;
            processBtn.textContent = 'ğŸš€ ÚˆÛŒØ²Ø§Ø¦Ù† Ø§Ù„Ú¯ Ú©Ø±ÛŒÚº';
            fileInput.value = '';
            
            // Reset upload section
            uploadSection.innerHTML = `
                <div class="upload-icon">ğŸ“¤</div>
                <div class="upload-text">
                    <h3>Mockup Ø§Ù¾ Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº</h3>
                    <p>Ú©Ù„Ú© Ú©Ø±ÛŒÚº ÛŒØ§ ØªØµÙˆÛŒØ± ÚˆØ±ÛŒÚ¯ Ø§ÛŒÙ†Úˆ ÚˆØ±Ø§Ù¾ Ú©Ø±ÛŒÚº</p>
                    <p style="color: #888; margin-top: 10px;">PNG, JPG, JPEG (Max 10MB)</p>
                </div>
            `;
            
            uploadSection.style.borderColor = '';
            uploadSection.style.background = '';
        }

        // Welcome message
        setTimeout(() => {
            alert(`ğŸ¨ Auto Design Extractor Ù…ÛŒÚº Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯!

ğŸš€ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±Ù†Û’ Ú©Ø§ Ø·Ø±ÛŒÙ‚Û:
1. Ú©ÙˆØ¦ÛŒ Ø¨Ú¾ÛŒ Mockup Ø§Ù¾ Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº (T-shirt, Mug, Bottle, etc.)
2. "ÚˆÛŒØ²Ø§Ø¦Ù† Ø§Ù„Ú¯ Ú©Ø±ÛŒÚº" Ø¨Ù¹Ù† Ø¯Ø¨Ø§Ø¦ÛŒÚº
3. AI Ø®ÙˆØ¯Ú©Ø§Ø± Ø·ÙˆØ± Ù¾Ø± ÚˆÛŒØ²Ø§Ø¦Ù† Ø§Ù„Ú¯ Ú©Ø± Ø¯Û’ Ú¯Ø§
4. PNG ÚˆØ§Ø¤Ù† Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº

âœ… No API Key Required
âœ… 100% Free
âœ… Offline Ú©Ø§Ù… Ú©Ø±ØªØ§ ÛÛ’

Ø§Ø¨ Ø¢Ù¾ Ú©ÙˆØ´Ø´ Ú©Ø±ÛŒÚº!`);
        }, 1000);
    </script>
</body>
</html>
