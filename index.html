<!DOCTYPE html>
<html lang="ur">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Design Only Extractor - ØµØ±Ù ÚˆÛŒØ²Ø§Ø¦Ù† Ù†Ú©Ø§Ù„ÛŒÚº</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', sans-serif;
        }

        body {
            background: #1a1a2e;
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: #16213e;
            border-radius: 20px;
            padding: 30px;
            border: 2px solid #0f3460;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid #0f3460;
        }

        .header h1 {
            font-size: 2.8rem;
            background: linear-gradient(90deg, #e94560, #00dbde);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .header p {
            color: #8a8a8a;
            font-size: 1.1rem;
        }

        /* Upload Area */
        .upload-area {
            border: 3px dashed #e94560;
            border-radius: 15px;
            padding: 60px 30px;
            text-align: center;
            margin: 30px 0;
            cursor: pointer;
            transition: all 0.3s;
            background: rgba(233, 69, 96, 0.1);
        }

        .upload-area:hover {
            border-color: #00dbde;
            background: rgba(0, 219, 222, 0.1);
        }

        .upload-icon {
            font-size: 70px;
            margin-bottom: 20px;
            color: #e94560;
        }

        .upload-text h3 {
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: white;
        }

        #fileInput {
            display: none;
        }

        /* Crop Area */
        .crop-section {
            display: none;
            margin: 30px 0;
        }

        .crop-title {
            text-align: center;
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #00dbde;
        }

        .crop-container {
            position: relative;
            max-width: 800px;
            margin: 0 auto;
            border: 3px solid #0f3460;
            border-radius: 10px;
            overflow: hidden;
        }

        #cropImage {
            max-width: 100%;
            display: block;
            cursor: crosshair;
        }

        .crop-box {
            position: absolute;
            border: 2px solid #00ff88;
            background: rgba(0, 255, 136, 0.1);
            cursor: move;
            display: none;
        }

        .crop-handle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #00ff88;
            border-radius: 50%;
            cursor: nwse-resize;
        }

        /* Crop Controls */
        .crop-controls {
            text-align: center;
            margin-top: 20px;
        }

        .crop-btn {
            background: linear-gradient(90deg, #e94560, #00dbde);
            color: white;
            border: none;
            padding: 12px 40px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1rem;
            margin: 5px;
            transition: all 0.3s;
        }

        .crop-btn:hover {
            transform: scale(1.05);
        }

        /* Result */
        .result-section {
            display: none;
            margin: 40px 0;
            text-align: center;
        }

        .result-title {
            font-size: 2rem;
            margin-bottom: 30px;
            color: #00ff88;
        }

        .result-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin: 0 auto;
            max-width: 500px;
            border: 2px solid #00dbde;
        }

        #resultDesign {
            max-width: 100%;
            max-height: 400px;
            border-radius: 10px;
            background: white;
            padding: 10px;
        }

        /* Download */
        .download-section {
            margin-top: 30px;
        }

        .download-btn {
            display: inline-block;
            background: linear-gradient(90deg, #e94560, #00dbde);
            color: white;
            padding: 15px 50px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.2rem;
            margin: 10px;
            transition: all 0.3s;
        }

        .download-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(0, 219, 222, 0.5);
        }

        /* Auto Detect */
        .auto-detect {
            text-align: center;
            margin: 20px 0;
        }

        .auto-btn {
            background: linear-gradient(90deg, #00dbde, #00ff88);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s;
        }

        .auto-btn:hover {
            transform: scale(1.05);
        }

        /* Instructions */
        .instructions {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin-top: 40px;
        }

        .instructions h3 {
            text-align: center;
            margin-bottom: 25px;
            color: #e94560;
        }

        .steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .step {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .step-number {
            width: 40px;
            height: 40px;
            background: linear-gradient(90deg, #e94560, #00dbde);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>âœ‚ï¸ Design Only Extractor</h1>
            <p>Mockup Ù…ÛŒÚº Ø³Û’ ØµØ±Ù ÚˆÛŒØ²Ø§Ø¦Ù†/Ù„ÙˆÚ¯Ùˆ Ú©Ø§ Ø­ØµÛ Ù†Ú©Ø§Ù„ÛŒÚº - Ù¾ÙˆØ±Ø§ mockup Ù†ÛÛŒÚº</p>
        </div>

        <!-- Upload Area -->
        <div class="upload-area" id="uploadArea">
            <div class="upload-icon">ğŸ“¤</div>
            <div class="upload-text">
                <h3>Mockup Ø§Ù¾ Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº</h3>
                <p>Ø§Ù¾Ù†ÛŒ T-shirt/Mug/Bottle Ú©ÛŒ ØªØµÙˆÛŒØ± Ø§Ù¾ Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº</p>
                <p style="color: #8a8a8a; margin-top: 10px;">PNG, JPG, JPEG</p>
            </div>
        </div>
        <input type="file" id="fileInput" accept="image/*">

        <!-- Auto Detect -->
        <div class="auto-detect" id="autoDetect" style="display: none;">
            <button class="auto-btn" id="autoDetectBtn">
                ğŸ” ÚˆÛŒØ²Ø§Ø¦Ù† Ø®ÙˆØ¯Ú©Ø§Ø± ÚˆÚ¾ÙˆÙ†ÚˆÛŒÚº
            </button>
        </div>

        <!-- Crop Section -->
        <div class="crop-section" id="cropSection">
            <div class="crop-title">ğŸ”² ÚˆÛŒØ²Ø§Ø¦Ù† Ú©Ø§ Ø­ØµÛ Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº</div>
            <div class="crop-container" id="cropContainer">
                <img id="cropImage" src="" alt="Crop Image">
                <div class="crop-box" id="cropBox">
                    <div class="crop-handle" style="top: -5px; left: -5px;"></div>
                    <div class="crop-handle" style="top: -5px; right: -5px;"></div>
                    <div class="crop-handle" style="bottom: -5px; left: -5px;"></div>
                    <div class="crop-handle" style="bottom: -5px; right: -5px;"></div>
                </div>
            </div>
            <div class="crop-controls">
                <button class="crop-btn" id="cropBtn">âœ‚ï¸ ÚˆÛŒØ²Ø§Ø¦Ù† Ú©Ø§Ù¹ÛŒÚº</button>
                <button class="crop-btn" onclick="resetApp()" style="background: #666;">ğŸ”„ Ø¯ÙˆØ¨Ø§Ø±Û</button>
            </div>
        </div>

        <!-- Result Section -->
        <div class="result-section" id="resultSection">
            <div class="result-title">âœ… ØµØ±Ù ÚˆÛŒØ²Ø§Ø¦Ù† ØªÛŒØ§Ø± ÛÛ’!</div>
            <div class="result-container">
                <img id="resultDesign" alt="Extracted Design">
            </div>
            <div class="download-section">
                <a href="#" id="downloadBtn" class="download-btn" download="design.png">
                    â¬‡ï¸ PNG ÚˆØ§Ø¤Ù† Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº
                </a>
                <button class="download-btn" onclick="resetApp()" style="background: linear-gradient(90deg, #666, #888);">
                    ğŸ”„ Ù†ÛŒØ§ Mockup
                </button>
            </div>
        </div>

        <!-- Instructions -->
        <div class="instructions">
            <h3>ğŸ¯ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±Ù†Û’ Ú©Ø§ Ø·Ø±ÛŒÙ‚Û</h3>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <p>Mockup Ø§Ù¾ Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº</p>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <p>ÚˆÛŒØ²Ø§Ø¦Ù† Ú©Ø§ Ø­ØµÛ Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº</p>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <p>ØµØ±Ù ÚˆÛŒØ²Ø§Ø¦Ù† Ú©Ø§Ù¹ÛŒÚº</p>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <p>PNG ÚˆØ§Ø¤Ù† Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Elements
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const cropSection = document.getElementById('cropSection');
        const cropImage = document.getElementById('cropImage');
        const cropBox = document.getElementById('cropBox');
        const cropContainer = document.getElementById('cropContainer');
        const cropBtn = document.getElementById('cropBtn');
        const resultSection = document.getElementById('resultSection');
        const resultDesign = document.getElementById('resultDesign');
        const downloadBtn = document.getElementById('downloadBtn');
        const autoDetect = document.getElementById('autoDetect');
        const autoDetectBtn = document.getElementById('autoDetectBtn');

        // State
        let originalImage = null;
        let isDragging = false;
        let isResizing = false;
        let startX, startY;
        let cropBoxX = 100, cropBoxY = 100;
        let cropBoxWidth = 200, cropBoxHeight = 200;

        // File Upload
        uploadArea.addEventListener('click', () => fileInput.click());
        
        fileInput.addEventListener('change', handleFileUpload);

        function handleFileUpload(e) {
            const file = e.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(event) {
                originalImage = event.target.result;
                cropImage.src = originalImage;
                
                // Show crop section
                cropSection.style.display = 'block';
                autoDetect.style.display = 'block';
                
                // Update upload area
                uploadArea.innerHTML = `
                    <div class="upload-icon">âœ…</div>
                    <div class="upload-text">
                        <h3 style="color: #00ff88;">Mockup Ø§Ù¾ Ù„ÙˆÚˆ ÛÙˆ Ú¯ÛŒØ§!</h3>
                        <p>Ø§Ø¨ ÚˆÛŒØ²Ø§Ø¦Ù† Ú©Ø§ Ø­ØµÛ Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº</p>
                    </div>
                `;
                
                // Initialize crop box
                initCropBox();
                
                // Scroll to crop section
                cropSection.scrollIntoView({ behavior: 'smooth' });
            };
            reader.readAsDataURL(file);
        }

        // Initialize crop box
        function initCropBox() {
            // Set initial position and size
            cropBox.style.left = cropBoxX + 'px';
            cropBox.style.top = cropBoxY + 'px';
            cropBox.style.width = cropBoxWidth + 'px';
            cropBox.style.height = cropBoxHeight + 'px';
            cropBox.style.display = 'block';
        }

        // Mouse events for cropping
        cropImage.addEventListener('mousedown', startDrag);
        cropBox.addEventListener('mousedown', startBoxDrag);

        function startDrag(e) {
            if (e.target === cropImage) {
                isDragging = true;
                startX = e.clientX - cropBox.offsetLeft;
                startY = e.clientY - cropBox.offsetTop;
                document.addEventListener('mousemove', drag);
                document.addEventListener('mouseup', stopDrag);
            }
        }

        function startBoxDrag(e) {
            isDragging = true;
            startX = e.clientX;
            startY = e.clientY;
            document.addEventListener('mousemove', dragBox);
            document.addEventListener('mouseup', stopDrag);
        }

        function drag(e) {
            if (!isDragging) return;
            e.preventDefault();
            
            const containerRect = cropContainer.getBoundingClientRect();
            const x = e.clientX - containerRect.left - startX;
            const y = e.clientY - containerRect.top - startY;
            
            // Keep crop box within container
            const maxX = containerRect.width - cropBoxWidth;
            const maxY = containerRect.height - cropBoxHeight;
            
            cropBoxX = Math.max(0, Math.min(x, maxX));
            cropBoxY = Math.max(0, Math.min(y, maxY));
            
            cropBox.style.left = cropBoxX + 'px';
            cropBox.style.top = cropBoxY + 'px';
        }

        function dragBox(e) {
            if (!isDragging) return;
            e.preventDefault();
            
            const dx = e.clientX - startX;
            const dy = e.clientY - startY;
            
            const containerRect = cropContainer.getBoundingClientRect();
            const newX = cropBoxX + dx;
            const newY = cropBoxY + dy;
            
            // Keep crop box within container
            const maxX = containerRect.width - cropBoxWidth;
            const maxY = containerRect.height - cropBoxHeight;
            
            cropBoxX = Math.max(0, Math.min(newX, maxX));
            cropBoxY = Math.max(0, Math.min(newY, maxY));
            
            cropBox.style.left = cropBoxX + 'px';
            cropBox.style.top = cropBoxY + 'px';
            
            startX = e.clientX;
            startY = e.clientY;
        }

        function stopDrag() {
            isDragging = false;
            document.removeEventListener('mousemove', drag);
            document.removeEventListener('mousemove', dragBox);
            document.removeEventListener('mouseup', stopDrag);
        }

        // Resize handles
        const handles = cropBox.querySelectorAll('.crop-handle');
        handles.forEach(handle => {
            handle.addEventListener('mousedown', startResize);
        });

        function startResize(e) {
            e.stopPropagation();
            isResizing = true;
            startX = e.clientX;
            startY = e.clientY;
            document.addEventListener('mousemove', resize);
            document.addEventListener('mouseup', stopResize);
        }

        function resize(e) {
            if (!isResizing) return;
            
            const dx = e.clientX - startX;
            const dy = e.clientY - startY;
            
            const containerRect = cropContainer.getBoundingClientRect();
            const newWidth = Math.max(50, cropBoxWidth + dx);
            const newHeight = Math.max(50, cropBoxHeight + dy);
            
            // Keep within container
            const maxWidth = containerRect.width - cropBoxX;
            const maxHeight = containerRect.height - cropBoxY;
            
            cropBoxWidth = Math.min(newWidth, maxWidth);
            cropBoxHeight = Math.min(newHeight, maxHeight);
            
            cropBox.style.width = cropBoxWidth + 'px';
            cropBox.style.height = cropBoxHeight + 'px';
            
            startX = e.clientX;
            startY = e.clientY;
        }

        function stopResize() {
            isResizing = false;
            document.removeEventListener('mousemove', resize);
            document.removeEventListener('mouseup', stopResize);
        }

        // Auto detect design
        autoDetectBtn.addEventListener('click', function() {
            // Simple auto-detection algorithm
            const img = new Image();
            img.onload = function() {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = img.width;
                canvas.height = img.height;
                ctx.drawImage(img, 0, 0);
                
                // Find non-background area
                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                const edges = findEdges(imageData);
                const bounds = findDesignBounds(edges);
                
                if (bounds) {
                    // Position crop box on design
                    const scaleX = cropImage.width / img.width;
                    const scaleY = cropImage.height / img.height;
                    
                    cropBoxX = bounds.x * scaleX;
                    cropBoxY = bounds.y * scaleY;
                    cropBoxWidth = bounds.width * scaleX;
                    cropBoxHeight = bounds.height * scaleY;
                    
                    cropBox.style.left = cropBoxX + 'px';
                    cropBox.style.top = cropBoxY + 'px';
                    cropBox.style.width = cropBoxWidth + 'px';
                    cropBox.style.height = cropBoxHeight + 'px';
                    
                    alert('âœ… ÚˆÛŒØ²Ø§Ø¦Ù† Ø®ÙˆØ¯Ú©Ø§Ø± ÚˆÚ¾ÙˆÙ†Úˆ Ù„ÛŒØ§ Ú¯ÛŒØ§ ÛÛ’!');
                } else {
                    alert('âš ï¸ ÚˆÛŒØ²Ø§Ø¦Ù† Ù†ÛÛŒÚº Ù…Ù„Ø§ØŒ Ø¨Ø±Ø§Û Ú©Ø±Ù… Ø®ÙˆØ¯ Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº');
                }
            };
            img.src = originalImage;
        });

        function findEdges(imageData) {
            const edges = [];
            const data = imageData.data;
            const width = imageData.width;
            const height = imageData.height;
            
            for (let y = 0; y < height; y++) {
                for (let x = 0; x < width; x++) {
                    const idx = (y * width + x) * 4;
                    const r = data[idx];
                    const g = data[idx + 1];
                    const b = data[idx + 2];
                    
                    // Check if pixel is significantly different from background
                    const isBackground = (
                        (r > 200 && g > 200 && b > 200) || // Light
                        (r < 50 && g < 50 && b < 50) ||    // Dark
                        Math.abs(r - g) < 30 && Math.abs(g - b) < 30 // Gray
                    );
                    
                    edges.push(!isBackground);
                }
            }
            return edges;
        }

        function findDesignBounds(edges) {
            const width = cropImage.naturalWidth;
            const height = cropImage.naturalHeight;
            
            let minX = width, minY = height, maxX = 0, maxY = 0;
            let found = false;
            
            for (let y = 0; y < height; y++) {
                for (let x = 0; x < width; x++) {
                    if (edges[y * width + x]) {
                        found = true;
                        minX = Math.min(minX, x);
                        minY = Math.min(minY, y);
                        maxX = Math.max(maxX, x);
                        maxY = Math.max(maxY, y);
                    }
                }
            }
            
            if (found) {
                // Add some padding
                const padding = 10;
                return {
                    x: Math.max(0, minX - padding),
                    y: Math.max(0, minY - padding),
                    width: Math.min(width, maxX - minX + padding * 2),
                    height: Math.min(height, maxY - minY + padding * 2)
                };
            }
            return null;
        }

        // Crop button
        cropBtn.addEventListener('click', function() {
            const img = new Image();
            img.onload = function() {
                // Calculate scaling
                const scaleX = img.width / cropImage.width;
                const scaleY = img.height / cropImage.height;
                
                // Calculate crop coordinates
                const cropX = cropBoxX * scaleX;
                const cropY = cropBoxY * scaleY;
                const cropW = cropBoxWidth * scaleX;
                const cropH = cropBoxHeight * scaleY;
                
                // Create canvas for cropped image
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = cropW;
                canvas.height = cropH;
                
                // Draw only the cropped portion
                ctx.drawImage(
                    img,
                    cropX, cropY, cropW, cropH, // Source
                    0, 0, cropW, cropH          // Destination
                );
                
                // Convert to data URL
                const croppedDataUrl = canvas.toDataURL('image/png');
                
                // Show result
                resultDesign.src = croppedDataUrl;
                resultSection.style.display = 'block';
                downloadBtn.href = croppedDataUrl;
                downloadBtn.download = 'design_only.png';
                
                // Scroll to result
                resultSection.scrollIntoView({ behavior: 'smooth' });
            };
            img.src = originalImage;
        });

        // Reset app
        function resetApp() {
            // Reset everything
            originalImage = null;
            cropSection.style.display = 'none';
            resultSection.style.display = 'none';
            autoDetect.style.display = 'none';
            fileInput.value = '';
            
            // Reset upload area
            uploadArea.innerHTML = `
                <div class="upload-icon">ğŸ“¤</div>
                <div class="upload-text">
                    <h3>Mockup Ø§Ù¾ Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº</h3>
                    <p>Ø§Ù¾Ù†ÛŒ T-shirt/Mug/Bottle Ú©ÛŒ ØªØµÙˆÛŒØ± Ø§Ù¾ Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº</p>
                    <p style="color: #8a8a8a; margin-top: 10px;">PNG, JPG, JPEG</p>
                </div>
            `;
            
            // Reset crop box
            cropBoxX = 100;
            cropBoxY = 100;
            cropBoxWidth = 200;
            cropBoxHeight = 200;
            cropBox.style.display = 'none';
        }

        // Welcome message
        window.onload = function() {
            setTimeout(() => {
                alert(`âœ‚ï¸ Design Only Extractor Ù…ÛŒÚº Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯!

ğŸ¯ ÛŒÛ Ù¹ÙˆÙ„ ØµØ±Ù ÚˆÛŒØ²Ø§Ø¦Ù†/Ù„ÙˆÚ¯Ùˆ Ù†Ú©Ø§Ù„ØªØ§ ÛÛ’:
1. Mockup Ø§Ù¾ Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº
2. ÚˆÛŒØ²Ø§Ø¦Ù† Ú©Ø§ Ø­ØµÛ Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº (ÛŒØ§ Ø®ÙˆØ¯Ú©Ø§Ø± ÚˆÚ¾ÙˆÙ†ÚˆÛŒÚº)
3. ØµØ±Ù ÚˆÛŒØ²Ø§Ø¦Ù† Ú©Ø§Ù¹ÛŒÚº
4. PNG ÚˆØ§Ø¤Ù† Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº

Ù…Ø«Ø§Ù„: T-shirt Ø³Û’ ØµØ±Ù Ù„ÙˆÚ¯Ùˆ Ù†Ú©Ø§Ù„ÛŒÚºØŒ Ù¾ÙˆØ±ÛŒ T-shirt Ù†ÛÛŒÚº`);
            }, 1000);
        };
    </script>
</body>
</html>
